不具合とかはニトリ(@n1t0ri)のDMまでお願いします。
開発段階なので多少のバグは許してください

会話履歴はローカルファイル上に保存されているので、基本的に会話履歴を消したい時は/resetchatを使ってください。

/resetchatはローカルファイル、メモリを解放する事によって履歴を削除してます。chatgptが直接コマンドを認識してる訳では無いので、それ関連の命令も受け付けません。
openaiのapiを叩いて回答を出力してるので、僕の実行環境等の知識も一切無く、勿論ターミナルへのアクセスも不可能です。

特定の命令に対しても、20件以上前のものは/resetchatを使用しないと消せません

ソースコードは公開してません。需要があるなら公開するかもしれないです

現状、このbotはプライベートbotとして開発しているため、私が管理者権限を持っているサーバーのみに導入しています。

node.js/discord.js v14

実行環境:raspberry pi 3

model:gpt-5-nano-2025-08-07

# 現在修正対応中のバグ
・検索が必要な場合にもgptのfunction callingがsearch apiを呼び出さない問題

・ユーザーから受信した命令を正しく保存しない問題(本来ならユーザーから与えられた命令は会話履歴保存量の上限を超えて保存するようコーディングしていますが、function callingの判定の問題により一部の命令に対しては機能していないようです)
# アップデート履歴
✅️version 2.5.0

(＋)推論モデルをGPT 5 nano(gpt-5-nano-2025-08-07)に変更

✅️version 2.4.0

(＋)DMに送信されたメッセージに対してもchatgptを用いて返信を行うようになりました

✅️version 2.3.1

(＋)・｢webを検索します｣から応答が途切れる不具合を修正

一部人格ではこのバグがまだ残っているかもしれません

✅️version 2.3.0

(＋)画像入力に対応

トークン節約のため、画像データは履歴に保存しないよう設定しています。

✅️version 2.2.0

(＋) スラッシュコマンドをギルドコマンドからグローバルコマンドへ移行

(＋)会話履歴の保存アルゴリズムの変更

(＋)会話履歴をサーバー別に保存するように設定

✅️version 2.1.1

(＋)「chatgptの出力が途中で止まる」対策として、一度の応答でchatgptのapiが使用できるtoken数の上限を増加しました。

✅️version 2.1.0
 
(＋)検索アルゴリズムの改善を行いました

(＋)人格に早瀬ユウカを追加、その他のモデルのプロンプトの再構成を行いました。

(＋)ユーザーより与えられた命令は会話履歴保存量を無視して保存するように設定(一部の人格では無効)

(＋)会話履歴保存量を12に設定

(＋)botが処理を行っている間は入力中表記が出るようにしました


✅️version 2.0.0

(＋)brave search apiを利用して部分的な検索機能を実装しました。
chatgptより提供されているapiでは無いので情報の精度は低いかもしれないのと、検索apiも一ヶ月に利用出来る回数上限が決まっているので、それを超過後は機能しません

(＋)会話履歴の保存量を20件に増加しました。

(＋) アイコンを変更

✅️version 1.1.0

・/setpersonaで人格を変えることが出来ない問題を修正

・会話履歴を個別に保存しないように設定

・モデルを｢gptｰ4.1 nano｣に変更

・安定性高上の為サーバーをraspberry pi 3へ移行

・discord.jsのバージョンを14に変更、node.js等のバージョンもそれに伴いLTS版に更新

その他一部コード修正を行いました

✅️version 1.0.0 preｰrelease

ある程度のデバッグが済んだので、glitchとGASを利用した試験運用を開始

# 主な使い方

#が文章の前に付けられている場合、botは反応しません。

/setpersonaでbotの人格(口調)を変えることが出来ます。

/resetchatでbot内部に保存されている会話データを削除出来ます

無料に等しいレベルのコストですが、一応openaiのapi使用料はかかっているので意図的に長文を連投させる等の命令を実行するのは禁止です。小説を書いて程度なら問題ありません。

後、バグがとにかく多いので、発見次第自分に知らせて貰えると助かります

結構作るのに時間かかったので使って貰えると嬉しいです
追加して欲しい人格とかあれば言ってください
